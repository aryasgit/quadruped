ğŸ§ª WHAT TO DO WHILE THE PROGRAM RUNS

Think of this like a controlled experiment, not random poking.

Iâ€™ll break this into phases. You donâ€™t need to do all of them in one run, but this is the ideal sequence.

ğŸŸ¢ PHASE 0 â€” BASELINE (VERY IMPORTANT)

Duration: ~10 seconds
What to do:
ğŸ‘‰ Do absolutely nothing.
Let the robot stand still.

Why this matters:

Verifies IMU noise floor

Confirms PD + filter stability

Establishes reference roll_effort & offset_change

Expected in plots:

roll â‰ˆ 0

posture_roll_bias â‰ˆ 0

roll_effort â‰ˆ very small

offset_change â‰ˆ very small

brace = 0

If this isnâ€™t clean â†’ tuning issue, not gait issue.

ğŸŸ¡ PHASE 1 â€” SLOW MANUAL TILT (QUASI-STATIC)

Duration: ~15 seconds
What to do:

Gently tilt the robot left

Hold for ~2â€“3 seconds

Return to center

Repeat to the right

Then front / back (pitch)

Rules:

No jerks

No impacts

Think â€œexaminer tilting a scaleâ€

What this tests:

Complementary filter correctness

Roll & pitch PD signs

Shoulder + foot symmetry

Expected plots:

roll follows your tilt

posture_roll_bias stays â‰ˆ 0

roll_effort rises smoothly

no brace activation

ğŸš« If brace triggers here â†’ threshold too low.

ğŸŸ  PHASE 2 â€” STEP DISTURBANCE (BRACE TEST)

Duration: ~10 seconds
What to do:

Give a short, firm tap to:

shoulder region (roll)

torso front/back (pitch)

One push at a time

Let it recover fully before next

Do NOT shove continuously.

What this tests:

Brace detection

Brace decay

Gain scaling effectiveness

Expected plots:

roll spikes briefly

brace goes 0 â†’ 1 â†’ 0

roll_effort spikes

posture_roll_bias remains stable

If brace doesnâ€™t trigger â†’ threshold too high
If it sticks â†’ decay bug

ğŸ”µ PHASE 3 â€” UNLOAD ONLY (NO LIFT)

Duration: ~15 seconds
What to do:

Click Unload FRF

Let posture settle

Donâ€™t lift yet

Observe stance widening

Then:

Resume

Repeat for FLF / RRF / RLF

What this tests:

UNLOAD_POSTURE correctness

SHOULDER_OFFSETS geometry

posture_roll_bias ramping

Expected plots:

posture_roll_bias moves toward target

roll follows posture

offset_change increases slightly

brace stays 0

ğŸ”´ PHASE 4 â€” UNLOAD + LIFT (CONTROLLED)

Duration: ~10 seconds per leg
What to do:

Unload a leg

Press Lift

Hold for 2â€“3 seconds

Press Lower

Resume

What this tests:

Foot sign correctness

Motion offset layering

FSM transitions

Expected plots:

pitch shifts slightly

roll remains controlled

no oscillation

clean return to baseline

ğŸ›‘ HOW TO EXIT SAFELY (VERY IMPORTANT)
âŒ Do NOT just close terminal
âŒ Do NOT power off
âœ… CORRECT WAY TO EXIT
Option 1 â€” Keyboard Interrupt (BEST)

Press:

Ctrl + C


Your program will:

exit the loop

flush file buffers

keep CSV intact

If you want to be extra safe, add this at the very bottom of your file:

except KeyboardInterrupt:
    print("\nExiting cleanly...")
    if LOG_ENABLE:
        log_f.close()
    break


(If you want, I can give you the exact placement.)

âœ… VERIFY LOG SAVED

After exit:

ls -lh run_log.csv


You should see:

non-zero file size

timestamp updated

Then:

head run_log.csv
tail run_log.csv


To confirm content.

ğŸ§  HOW MANY RUNS SHOULD YOU DO?

Ideal:

1 run = 1 hypothesis

Donâ€™t mix too many behaviors per run

Example runs:

Baseline + slow tilt

Brace only

Unload only

Unload + lift

Label them by renaming logs:

mv run_log.csv log_unload_frf.csv

ğŸ”¥ WHAT WEâ€™LL DO NEXT (AFTER YOU PLOT)

Once you show me:

â€œroll vs postureâ€ plot

or describe its shape

We can:

tune ALPHA properly

tune K_ROLL using real data

auto-detect unloading readiness

eventually resurrect crawl cleanly

Youâ€™re now doing real robotics, not guesswork.
Run Phase 0 â†’ Phase 1 first and tell me what you see.
